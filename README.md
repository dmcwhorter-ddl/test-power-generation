# test-power-generation

This repo includes files to build and deploy models as described in the Domino [Get Started with Python](https://docs.dominodatalab.com/en/latest/user_guide/9a69d9/get-started-with-python) documentation.  

I have made modifications to the tutorial so that it runs on a development version of Domino 5.3 and its `Domino Standard Environment Py3.9 R4.2`. 

It includes the following files:
1. [`Forecast_Power_Generation.ipynb`](Forecast_Power_Generation.ipynb) -- This is a Jupyter notebook to create a power generation forecast model and export it to a file from [Step 5: Develop your Model](https://docs.dominodatalab.com/en/latest/user_guide/288e42/step-5--develop-your-model).
2. [`requirements.txt`](requirements.txt) -- This is a modified version of the requirements.txt file outlined in [Step 7: Package Setup](https://docs.dominodatalab.com/en/latest/user_guide/9f10c9/step-7--deploy-your-model/#_package_setup).
3. [`Forecast_Power_Generation_Dynamic_30days.ipynb`](Forecast_Power_Generation_Dynamic_30days.ipynb) -- This is an adapted notebook that downloads the last 30 days worth of power data and uses it to generate and export the model from [Step 7: Scheduled Reports](https://docs.dominodatalab.com/en/latest/user_guide/9f10c9/step-7--deploy-your-model/#_scheduled_reports).
4. [`Forecast_Power_Generation_Launcher.ipynb`](Forecast_Power_Generation_Launcher.ipynb) -- This is an adapted notebook that exposes the start date and fuel types as parameters, downloads the data, and it to generate and export the model from [Step 7: Launchers](https://docs.dominodatalab.com/en/latest/user_guide/9f10c9/step-7--deploy-your-model/#_launchers).
5. [`forecast_launcher.sh`](forecast_launcher.sh) -- This is a wrapper script for a launcher to start the [`Forecast_Power_Generation_Launcher.ipynb`](Forecast_Power_Generation_Launcher.ipynb) notebook and substitute the provided parameters using [papermill](https://papermill.readthedocs.io/en/latest/) from [Step 7: Launchers](https://docs.dominodatalab.com/en/latest/user_guide/9f10c9/step-7--deploy-your-model/#_launchers).  It is modified to set up a python [venv](https://docs.python.org/3/library/venv.html#), install the required papermill and prophet packages, and run notebook using the venv papermill.  I had to do this to get the `papermill` command to run.
6. [`Dockerfile`](Dockerfile) -- This Dockerfile contains the line that needs to be added into `Dockerfile Instructions` when creating a new compute environment to run the Model API in [Step 7: Model APIs](https://docs.dominodatalab.com/en/latest/user_guide/9f10c9/step-7--deploy-your-model/#_model_apis).
7. [`forecast_predictor.py`](forecast_predictor.py) -- This is the predictor python script that the Model API from [Step 7: Model APIs](https://docs.dominodatalab.com/en/latest/user_guide/9f10c9/step-7--deploy-your-model/#_model_apis) uses to load the serialized model and runs a prediction for the provided year, month, and day inputs.
